# WindowsDaemon

Скрипт предназначен для обеспечения непрерывной работы критически важных приложений. Скрипт автоматически мониторит состояние указанных приложений и, в случае их остановки или сбоя, перезапускает их. Дополнительно реализована функция отправки статуса работы приложений на внешний мониторинговый сервер через HTTP запросы, что позволяет оперативно реагировать на проблемы. 

## Ключевые возможности
- **Мониторинг приложений**: Постоянная проверка состояния заданных приложений с определённым интервалом.
- **Автоматический перезапуск**: В случае обнаружения неактивности приложения, система попытается автоматически его перезапустить.
- **Уведомления о статусе**: Отправка данных о состоянии и действиях системы на удалённый сервер для уведомления администратора.
- **Легкая интеграция**: Простота настройки и управления через конфигурационный файл.
- **Автозапуск**: Возможность конфигурирования скриптов для автоматического запуска при старте системы.

## Применение
Система идеально подходит для использования в условиях, где требуется высокая доступность и надёжность обслуживания IT-инфраструктуры, таких как серверные комнаты, рабочие станции для видеонаблюдения и другие критические среды.


## Описание Файлов
- `angel.ps1`: Скрипт для мониторинга и перезапуска заданных приложений. Поддерживает отправку статуса через HTTP GET запросы.
- `autostart.ps1`: Утилита для автоматического запуска `angel.ps1` при входе пользователя в систему Windows.
- `uninstall.ps1`: Скрипт для удаления задач автозапуска из Планировщика задач и очистки лог-файлов.

## Требования
Для работы скриптов необходимы:
- PowerShell 5.1 или выше
- Административные права для выполнения некоторых операций

## Настройка и Установка
### 1. Настройка `angel.ps1`
Отредактируйте массив `$applications` в скрипте, указав пути и параметры приложений, которые требуется мониторить. Пример конфигурации:
```powershell
$applications = @(
    @{ Path="C:\\Path\\To\\Application.exe"; Args=""; MaxRestarts=3; MonitoringEnabled=$true; MonitoringUrl="http://your.monitoring.url"; MonitoringInterval=60 }
)
```

### 2. Автоматический запуск
Запустите `autostart.ps1` для добавления `angel.ps1` в Планировщик задач Windows. Это обеспечит автоматический запуск мониторинга при входе в систему.

### 3. Удаление
Запустите `uninstall.ps1` для удаления задачи из Планировщика и очистки лог-файлов.

## Запуск
Для ручного запуска мониторинга, выполните:
```powershell
powershell.exe -File path\to\angel.ps1
```

## Логирование
Скрипт автоматически сохраняет логи операций в файл `logs.txt` в каталоге `C:\\Users\\NVR\\Documents\\Daemon\\`.

## Обратите внимание
- Убедитесь, что указанные пути к файлам и URL для мониторинга корректны.
- Проверьте настройки системы на предмет ограничений для выполнения скриптов.

